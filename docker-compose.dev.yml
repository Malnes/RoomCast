services:
  controller:
    command: >
      uvicorn main:app --host 0.0.0.0 --port 8000 --reload --proxy-headers
    volumes:
      - ./server:/app
      - ./server/static:/app/static:ro
      - config:/config
      - snapfifo:/tmp
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      PYTHONDONTWRITEBYTECODE: "1"
      RADIO_WORKER_TOKEN: ${RADIO_WORKER_TOKEN:-}
    # DISCOVERY_CIDR is no longer hardcoded

volumes:
  config:

